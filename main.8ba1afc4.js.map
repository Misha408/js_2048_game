{"version":3,"sources":["scripts/main.js"],"names":["ceils","document","querySelectorAll","score","querySelector","start","startText","loseText","winText","messageText","forEach","cell","textContent","classList","remove","checkStep","startGame","randomIndex1","Math","floor","random","length","randomIndex2","add","restartGame","handleButtonClick","generateNewCeil","emptyIndices","index","push","randomNumb","randomIndex","newValue","move","items","itemsFrom","j","k","value","moveLeft","i","moveRight","moveUp","moveDown","row","cells","column","addEventListener","event","repeat","key","getElementById"],"mappings":"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","file":"main.8ba1afc4.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst ceils = document.querySelectorAll('.field-cell');\nconst score = document.querySelector('.game-score');\nconst start = document.querySelector('#startButton');\n\nconst startText = document.querySelector('.message-start');\nconst loseText = document.querySelector('.message-lose');\nconst winText = document.querySelector('.message-win');\n\nfunction messageText() {\n  ceils.forEach((cell) => {\n    if (cell.textContent === '2048') {\n      winText.classList.remove('hidden');\n    }\n  });\n\n  if (checkStep() === false) {\n    loseText.classList.remove('hidden');\n  }\n}\n\nfunction startGame() {\n  const randomIndex1 = Math.floor(Math.random() * ceils.length);\n  const randomIndex2 = Math.floor(Math.random() * ceils.length);\n\n  ceils[randomIndex1].classList.add('field-cell--2');\n  ceils[randomIndex1].textContent = '2';\n\n  ceils[randomIndex2].classList.add('field-cell--2');\n  ceils[randomIndex2].textContent = '2';\n\n  start.classList = 'button restart';\n  start.textContent = 'Restart';\n\n  startText.classList.add('hidden');\n}\n\nfunction restartGame() {\n  ceils.forEach(cell => {\n    cell.textContent = '';\n    cell.classList = 'field-cell';\n  });\n\n  score.textContent = '0';\n  start.classList = 'button start';\n  start.textContent = 'Start';\n\n  loseText.classList.add('hidden');\n  startText.classList.remove('hidden');\n}\n\nfunction handleButtonClick() {\n  if (start.textContent === 'Start') {\n    startGame();\n  } else {\n    restartGame();\n  }\n}\n\nfunction generateNewCeil() {\n  const emptyIndices = [];\n\n  ceils.forEach((cell, index) => {\n    if (cell.textContent === '') {\n      emptyIndices.push(index);\n    }\n  });\n\n  if (emptyIndices.length === 0) {\n    return;\n  }\n\n  const randomNumb = Math.floor(Math.random() * emptyIndices.length);\n  const randomIndex = emptyIndices[randomNumb];\n\n  const probability = Math.random() < 0.1;\n  const newValue = probability ? '4' : '2';\n\n  ceils[randomIndex].textContent = newValue;\n  ceils[randomIndex].classList.add(`field-cell--${newValue}`);\n}\n\nfunction move(items, itemsFrom) {\n  if (itemsFrom === 0) {\n    for (let j = 1; j < 4; j++) {\n      if (items[j].textContent !== '') {\n        for (let k = j; k > 0; k--) {\n          const value = +items[k].textContent;\n\n          if (items[k - 1].textContent === '') {\n            items[k - 1].textContent = items[k].textContent;\n            items[k - 1].classList.add(`field-cell--${value}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n          } else if (items[k - 1].textContent === items[k].textContent) {\n            items[k - 1].textContent = value * 2;\n            items[k - 1].classList.add(`field-cell--${value * 2}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n\n            score.textContent = +score.textContent + value * 2;\n            break;\n          }\n        }\n      }\n    }\n  } else {\n    for (let j = 2; j >= 0; j--) {\n      if (items[j].textContent !== '') {\n        for (let k = j; k < 3; k++) {\n          const value = +items[k].textContent;\n\n          if (items[k + 1].textContent === '') {\n            items[k + 1].textContent = items[k].textContent;\n            items[k + 1].classList.add(`field-cell--${value}`);\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n          } else if (items[k + 1].textContent === items[k].textContent) {\n            items[k + 1].textContent = value * 2;\n            items[k + 1].classList.add(`field-cell--${value * 2}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n\n            score.textContent = +score.textContent + value * 2;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction moveLeft() {\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll('.field-row')[i];\n    const cells = row.querySelectorAll('.field-cell');\n\n    move(cells, 0);\n  }\n\n  generateNewCeil();\n  messageText();\n}\n\nfunction moveRight() {\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll('.field-row')[i];\n    const cells = row.querySelectorAll('.field-cell');\n\n    move(cells, 1);\n  }\n\n  generateNewCeil();\n  messageText();\n}\n\nfunction moveUp() {\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    move(column, 0);\n  }\n\n  generateNewCeil();\n  messageText();\n}\n\nfunction moveDown() {\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    move(column, 1);\n  }\n\n  generateNewCeil();\n  messageText();\n}\n\nfunction checkStep() {\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll('.field-row')[i];\n    const cells = row.querySelectorAll('.field-cell');\n\n    for (let j = 0; j < 3; j++) {\n      if (cells[j].textContent === cells[j + 1].textContent\n        || cells[j].textContent === '') {\n        return true;\n      }\n    }\n  }\n\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    for (let j = 0; j < 3; j++) {\n      if (column[j].textContent === column[j + 1].textContent\n        || column[j].textContent === '') {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\ndocument.addEventListener('keydown', () => {\n  if (event.repeat) {\n    return;\n  }\n\n  switch (event.key) {\n    case 'ArrowLeft':\n      moveLeft();\n      break;\n    case 'ArrowRight':\n      moveRight();\n\n      break;\n    case 'ArrowUp':\n      moveUp();\n      break;\n    case 'ArrowDown':\n      moveDown();\n      break;\n    default:\n      break;\n  }\n});\n\ndocument\n  .getElementById('startButton')\n  .addEventListener('click', handleButtonClick);\n"]}